Переключение раскладки не очень удобно и почти никто не пытается исправить это неудобство в своей программе. Хотя делается это очень просто. Не буду касаться тонкостей определения установленных в системе раскладок, возьму самый простой случай с русским компьютером и русско-английской раскладкой.